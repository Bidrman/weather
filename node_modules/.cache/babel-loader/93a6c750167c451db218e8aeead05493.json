{"ast":null,"code":"var _jsxFileName = \"C:\\\\javascript\\\\weather\\\\src\\\\features\\\\Weather\\\\containers\\\\WeatherFormContainer.jsx\";\nimport React from 'react';\nimport WeatherForm from '../components/WeatherForm';\nimport { connect } from 'react-redux';\nimport { SET_CITY, ADD_CITY, UPDATE_CITIES } from '../store/actions';\nimport { fetchWeather } from '../../FetchAPI/fetchWeather';\n\nconst mapStateToProps = state => {\n  return {\n    targetCity: state.weather.targetCity,\n    cities: state.weather.cities\n  };\n}; // save to localStorage\n\n\nconst clearStorage = itemKey => {\n  localStorage.removeItem(itemKey);\n  window.location.reload();\n};\n\nconst mapDispatchToProps = dispatch => {\n  const setCity = event => dispatch({\n    type: SET_CITY,\n    payload: event.target.value\n  });\n\n  const addCity = cityName => {\n    return fetchWeather(cityName).then(data => dispatch({\n      type: ADD_CITY,\n      payload: data\n    }));\n  };\n\n  const resetCity = () => dispatch({\n    type: SET_CITY,\n    payload: ''\n  });\n\n  const addCityAndReset = payload => {\n    addCity(payload).then(resetCity);\n  }; // prepsat na axios fetch (casem)\n\n\n  const updateCityForecast = cities => {\n    const promises = cities.map(city => city.data = fetchWeather(city.name)); // MUSI SE OPRAVIT kvuli novymu API\n\n    Promise.all(promises).then(values => {\n      const transformedData = values.map(city => {\n        return {\n          name: city.city_name,\n          date: new Date(),\n          data: city.data\n        };\n      });\n      dispatch({\n        type: UPDATE_CITIES,\n        payload: transformedData\n      });\n    });\n  };\n\n  return {\n    setCity: setCity,\n    addCityAndReset: addCityAndReset,\n    updateCityForecast: updateCityForecast\n  };\n};\n\nconst WeatherFormContainer = ({\n  targetCity,\n  cities,\n  setCity,\n  addCityAndReset,\n  updateCityForecast\n}) => {\n  return React.createElement(WeatherForm, {\n    updateForecast: updateCityForecast,\n    clearStorage: clearStorage,\n    setCity: setCity,\n    city: targetCity,\n    cities: cities,\n    addCityAndReset: addCityAndReset,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  });\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WeatherFormContainer);","map":{"version":3,"sources":["C:/javascript/weather/src/features/Weather/containers/WeatherFormContainer.jsx"],"names":["React","WeatherForm","connect","SET_CITY","ADD_CITY","UPDATE_CITIES","fetchWeather","mapStateToProps","state","targetCity","weather","cities","clearStorage","itemKey","localStorage","removeItem","window","location","reload","mapDispatchToProps","dispatch","setCity","event","type","payload","target","value","addCity","cityName","then","data","resetCity","addCityAndReset","updateCityForecast","promises","map","city","name","Promise","all","values","transformedData","city_name","date","Date","WeatherFormContainer"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport WeatherForm from '../components/WeatherForm'\r\nimport { connect } from 'react-redux'\r\nimport { SET_CITY, ADD_CITY, UPDATE_CITIES } from '../store/actions'\r\nimport { fetchWeather } from '../../FetchAPI/fetchWeather'\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    targetCity: state.weather.targetCity,\r\n    cities: state.weather.cities,\r\n  }\r\n}\r\n// save to localStorage\r\nconst clearStorage = (itemKey) => {\r\n  localStorage.removeItem(itemKey)\r\n  window.location.reload()\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  const setCity = (event) =>\r\n    dispatch({ type: SET_CITY, payload: event.target.value })\r\n  const addCity = (cityName) => {\r\n    return fetchWeather(cityName).then((data) =>\r\n      dispatch({ type: ADD_CITY, payload: data }),\r\n    )\r\n  }\r\n  const resetCity = () => dispatch({ type: SET_CITY, payload: '' })\r\n  const addCityAndReset = (payload) => {\r\n    addCity(payload).then(resetCity)\r\n  }\r\n\r\n  // prepsat na axios fetch (casem)\r\n  const updateCityForecast = (cities) => {\r\n    const promises = cities.map((city) => (city.data = fetchWeather(city.name)))\r\n\r\n    // MUSI SE OPRAVIT kvuli novymu API\r\n    Promise.all(promises).then((values) => {\r\n      const transformedData = values.map((city) => {\r\n        return {\r\n          name: city.city_name,\r\n          date: new Date(),\r\n          data: city.data,\r\n        }\r\n      })\r\n      dispatch({ type: UPDATE_CITIES, payload: transformedData })\r\n    })\r\n  }\r\n\r\n  return {\r\n    setCity: setCity,\r\n    addCityAndReset: addCityAndReset,\r\n    updateCityForecast: updateCityForecast,\r\n  }\r\n}\r\n\r\nconst WeatherFormContainer = ({\r\n  targetCity,\r\n  cities,\r\n  setCity,\r\n  addCityAndReset,\r\n  updateCityForecast,\r\n}) => {\r\n  return (\r\n    <WeatherForm\r\n      updateForecast={updateCityForecast}\r\n      clearStorage={clearStorage}\r\n      setCity={setCity}\r\n      city={targetCity}\r\n      cities={cities}\r\n      addCityAndReset={addCityAndReset}\r\n    />\r\n  )\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(WeatherFormContainer)\r\n"]},"metadata":{},"sourceType":"module"}